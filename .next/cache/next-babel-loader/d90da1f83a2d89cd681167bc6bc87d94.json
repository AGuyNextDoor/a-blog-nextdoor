{"ast":null,"code":"var _jsxFileName = \"/Users/martinvielvoye/a-blog-nextdoor/client/pages/Drawings/index.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState, useEffect, Component } from \"react\";\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\nimport ReactDOM from \"react-dom\";\nimport path from \"path\";\nimport { useRouter } from \"next/router\";\nimport fs from \"fs\";\nimport util from \"util\";\nimport getConfig from \"next/config\";\nconst {\n  serverRuntimeConfig\n} = getConfig();\nconst readdir = util.promisify(fs.readdir);\nconst readFile = util.promisify(fs.readFile);\nreaddir(path.join(serverRuntimeConfig.PROJECT_ROOT, \"./public/drawings\")).then(files => console.log);\nexport async function allFolder(r = []) {\n  if (r.length !== 0) {\n    r = await getImageDir(getAllImages);\n  }\n\n  let folder = r.map(element => {\n    return element.match(/(?<=\\.)(.*?)(?=\\.)/g)[0];\n  });\n  folder = [...new Set(folder)];\n  folder = folder.filter(r => {\n    if (r) {\n      return r;\n    }\n  });\n  return folder;\n}\nexport const allFolders = allFolder();\n\nfunction topThreeImages(imgGroup) {\n  let category = imgGroup[0];\n  let urls = imgGroup[1]; // result = completeUrl.map((url) => {\n  //   console.log({ url });\n  //   if (url.match(/(?<=\\.)(.*?)(?=\\.)/g)[0] === imgGroup) {\n  //     return url;\n  //   }\n  // });\n  // result = result.filter((url) => {\n  //   if (url) {\n  //     return url;\n  //   }\n  // });\n\n  return urls;\n}\n\nconst getAllImages = element => {\n  return element;\n};\n\nconst getImageDir = async callback => {\n  const folders = await fetch(\"/api/getImagesDir\").then(res => res.json());\n  return callback(folders);\n};\n\nconst Images = () => {\n  _s();\n\n  const {\n    0: imageState,\n    1: updateImageState\n  } = useState([]);\n  const location = useRouter();\n\n  const imagePile = imgGroup => {\n    const urls = topThreeImages(imgGroup);\n    console.log({\n      urls\n    });\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      id: \"photo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }\n    }, __jsx(Link, {\n      to: \"/Drawings/\" + imgGroup[0],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }\n    }, __jsx(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }\n    }, imgGroup[0])), __jsx(\"div\", {\n      id: \"photo-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }\n    }, __jsx(\"div\", {\n      id: \"small_1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }\n    }, __jsx(Link, {\n      to: \"/Drawings/\" + imgGroup[0],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 15\n      }\n    }, __jsx(\"img\", {\n      id: \"copy\",\n      src: \"/drawings/\" + imgGroup[0] + \"/thumbnails/\" + urls[0],\n      class: \"img-thumbnail rounded\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }\n    }))), __jsx(\"div\", {\n      id: \"small_2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }\n    }, __jsx(Link, {\n      to: \"/Drawings/\" + imgGroup[0],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 15\n      }\n    }, __jsx(\"img\", {\n      id: \"copy\",\n      src: \"/drawings/\" + imgGroup[0] + \"/thumbnails/\" + urls[1],\n      class: \" img-thumbnail rounded\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }\n    }))), __jsx(\"div\", {\n      id: \"small_3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }\n    }, __jsx(Link, {\n      to: \"/Drawings/\" + imgGroup[0],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 15\n      }\n    }, __jsx(\"img\", {\n      id: \"copy\",\n      src: \"/drawings/\" + imgGroup[0] + \"/thumbnails/\" + urls[2],\n      class: \"img-thumbnail rounded\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }\n    }))))));\n  };\n\n  useEffect(() => {\n    getImages(updateImageState); // getImageDir(updateImageState);\n  }, []);\n  return __jsx(\"div\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 5\n    }\n  }, imageState.length ? __jsx(\"div\", {\n    id: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, imageState.map(imgGroup => {\n    console.log({\n      imgGroup\n    });\n    return imagePile(imgGroup);\n  })) : __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }, \"Loading...\"));\n};\n\n_s(Images, \"VkdzoZJmnNfDmN0i5SpWyw8VvYY=\", false, function () {\n  return [useRouter];\n});\n\n_c = Images;\n\nconst getImages = async callback => {\n  let result = await fetch(\"/api/getThumbnails\").then(res => res.json());\n  callback([...result]);\n};\n\nconst Folder = ({\n  match,\n  props\n}) => {\n  _s2();\n\n  const {\n    0: folderState,\n    1: updateFolderState\n  } = useState([]);\n\n  const getFolder = () => {\n    console.log(props.urlList); // const uploadsDirectory = path.join(__dirname, \"../../images/\");\n    // const completeUrl = importAll(require.context(\"../../images/\", false, /\\.(png|jpe?g|svg)$/));\n    // const completeFolder = allFolder(require.context(\"../../images/\", false, /\\.(png|jpe?g|svg)$/)));\n\n    getImages(props.urlList);\n  };\n\n  getFolder();\n  useEffect(() => {\n    getImages(updateFolderState);\n  }, []);\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 10\n    }\n  }, folderState);\n};\n\n_s2(Folder, \"RZDj+J9BWVjtfS3JfHo7ObywgYk=\");\n\n_c2 = Folder;\nexport default Images;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Images\");\n$RefreshReg$(_c2, \"Folder\");","map":{"version":3,"sources":["/Users/martinvielvoye/a-blog-nextdoor/client/pages/Drawings/index.js"],"names":["React","useState","useEffect","Component","BrowserRouter","Router","Route","Link","ReactDOM","path","useRouter","fs","util","getConfig","serverRuntimeConfig","readdir","promisify","readFile","join","PROJECT_ROOT","then","files","console","log","allFolder","r","length","getImageDir","getAllImages","folder","map","element","match","Set","filter","allFolders","topThreeImages","imgGroup","category","urls","callback","folders","fetch","res","json","Images","imageState","updateImageState","location","imagePile","getImages","result","Folder","props","folderState","updateFolderState","getFolder","urlList"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Component } from \"react\";\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\nimport ReactDOM from \"react-dom\";\nimport path from \"path\";\nimport { useRouter } from \"next/router\";\nimport fs from \"fs\";\nimport util from \"util\";\nimport getConfig from \"next/config\";\nconst { serverRuntimeConfig } = getConfig();\n\nconst readdir = util.promisify(fs.readdir);\nconst readFile = util.promisify(fs.readFile);\n\nreaddir(path.join(serverRuntimeConfig.PROJECT_ROOT, \"./public/drawings\")).then(files => console.log)\n\nexport async function allFolder(r = []) {\n  if (r.length !== 0) {\n    r = await getImageDir(getAllImages);\n  }\n\n  let folder = r.map((element) => {\n    return element.match(/(?<=\\.)(.*?)(?=\\.)/g)[0];\n  });\n\n  folder = [...new Set(folder)];\n\n  folder = folder.filter((r) => {\n    if (r) {\n      return r;\n    }\n  });\n\n  return folder;\n}\n\nexport const allFolders = allFolder();\n\nfunction topThreeImages(imgGroup) {\n  let category = imgGroup[0];\n  let urls = imgGroup[1];\n\n  // result = completeUrl.map((url) => {\n  //   console.log({ url });\n  //   if (url.match(/(?<=\\.)(.*?)(?=\\.)/g)[0] === imgGroup) {\n  //     return url;\n  //   }\n  // });\n\n  // result = result.filter((url) => {\n  //   if (url) {\n  //     return url;\n  //   }\n  // });\n\n  return urls;\n}\n\nconst getAllImages = (element) => {\n  return element;\n};\n\nconst getImageDir = async (callback) => {\n  const folders = await fetch(\"/api/getImagesDir\").then((res) => res.json());\n\n  return callback(folders);\n};\n\nconst Images = () => {\n  const [imageState, updateImageState] = useState([]);\n  const location = useRouter()\n\n  const imagePile = (imgGroup) => {\n    const urls = topThreeImages(imgGroup);\n\n    console.log({ urls });\n\n    return (\n      <div>\n        <div id=\"photo\">\n          <Link to={\"/Drawings/\" + imgGroup[0]}>\n            <h2>{imgGroup[0]}</h2>\n          </Link>\n          <div id=\"photo-center\">\n            <div id=\"small_1\">\n              <Link to={\"/Drawings/\" + imgGroup[0]}>\n                <img\n                  id=\"copy\"\n                  src={\"/drawings/\" + imgGroup[0] + \"/thumbnails/\" + urls[0]}\n                  class=\"img-thumbnail rounded\"\n                ></img>\n              </Link>\n            </div>\n            <div id=\"small_2\">\n              <Link to={\"/Drawings/\" + imgGroup[0]}>\n                <img\n                  id=\"copy\"\n                  src={\"/drawings/\" + imgGroup[0] + \"/thumbnails/\" + urls[1]}\n                  class=\" img-thumbnail rounded\"\n                ></img>\n              </Link>\n            </div>\n            <div id=\"small_3\">\n              <Link to={\"/Drawings/\" + imgGroup[0]}>\n                <img\n                  id=\"copy\"\n                  src={\"/drawings/\" + imgGroup[0] + \"/thumbnails/\" + urls[2]}\n                  class=\"img-thumbnail rounded\"\n                ></img>\n              </Link>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  useEffect(() => {\n    getImages(updateImageState);\n    // getImageDir(updateImageState);\n  }, []);\n\n  return (\n    <div className=\"text-center\">\n      {imageState.length ? (\n        <div id=\"main\">\n          {imageState.map((imgGroup) => {\n            console.log({ imgGroup });\n            return imagePile(imgGroup);\n          })}\n        </div>\n      ) : (\n        <div>Loading...</div>\n      )}\n      {/* <Route path={`${process.env.URL + location.pathname}/:groupName`} urlList={imageState} component={Folder} /> */}\n    </div>\n  );\n};\n\nconst getImages = async (callback) => {\n  let result = await fetch(\"/api/getThumbnails\").then((res) => res.json());\n\n  callback([...result]);\n};\n\nconst Folder = ({ match, props }) => {\n  const [folderState, updateFolderState] = useState([]);\n\n  const getFolder = () => {\n    console.log(props.urlList);\n    // const uploadsDirectory = path.join(__dirname, \"../../images/\");\n\n    // const completeUrl = importAll(require.context(\"../../images/\", false, /\\.(png|jpe?g|svg)$/));\n    // const completeFolder = allFolder(require.context(\"../../images/\", false, /\\.(png|jpe?g|svg)$/)));\n\n    getImages(props.urlList);\n  };\n\n  getFolder();\n\n  useEffect(() => {\n    getImages(updateFolderState);\n  }, []);\n\n  return <div>{folderState}</div>;\n};\n\nexport default Images;\n"]},"metadata":{},"sourceType":"module"}