{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect, Component } from \"react\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport ReactHtmlParser from \"react-html-parser\";\nimport showdown from \"showdown\";\nvar converter = new showdown.Converter();\n\nvar getArticle = function getArticle(url) {\n  return fetch(\"\\/api\\/articles/\" + url).then(function (res) {\n    return res.text();\n  }).then(function (res) {\n    return [res, url];\n  }).catch(function (err) {\n    console.log(err);\n    return null;\n  });\n};\n\nvar articleCard = function articleCard(articleText, activeTags, tagsState) {\n  var flag = true;\n  var activeCategories = activeTags.filter(function (obj) {\n    return obj.active;\n  });\n\n  if (activeCategories.length === 0) {\n    return __jsx(\"div\", {\n      class: \"card\"\n    }, __jsx(\"div\", {\n      class: \"card-body\"\n    }, __jsx(\"h7\", {\n      class: \"card-title\"\n    }, articleText[1])));\n  } else {\n    activeCategories.forEach(function (obj) {\n      if (!(tagsState[obj.name].indexOf(articleText[1]) > -1)) {\n        flag = false;\n      }\n    });\n\n    if (flag) {\n      return __jsx(\"div\", {\n        class: \"card\"\n      }, __jsx(\"div\", {\n        class: \"card-body\"\n      }, __jsx(\"h7\", {\n        class: \"card-title\"\n      }, articleText[1])));\n    }\n  }\n};\n\nvar ArticlesCard = function ArticlesCard(_ref) {\n  var articleURL = _ref.articleURL,\n      activeTags = _ref.activeTags;\n  var location = useRouter();\n\n  var _useState = useState([\"articles loading...\"]),\n      articleState = _useState[0],\n      updateArticleState = _useState[1];\n\n  var _useState2 = useState([]),\n      tagsState = _useState2[0],\n      updateTags = _useState2[1]; // Retrieves the list of items from the Express app\n\n\n  useEffect(function () {\n    Promise.all(articleURL.map(getArticle)).then(function (proRes) {\n      updateArticleState(proRes);\n    }).then(function () {\n      fetch(\"tags.json\").then(function (tags) {\n        return tags.json();\n      }).then(function (tags) {\n        updateTags(tags);\n      });\n    });\n  }, [articleURL, activeTags]);\n  return __jsx(\"div\", {\n    class: \"row\"\n  }, __jsx(\"div\", {\n    class: \"col-10 rounded\"\n  }, articleState.map(function (article) {\n    return articleCard(article, activeTags, tagsState);\n  })));\n};\n\nexport default ArticlesCard;","map":null,"metadata":{},"sourceType":"module"}